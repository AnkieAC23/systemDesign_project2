<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width initial-scale=1"
  />

  <title>Your Fashion Diary</title>

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  >
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&display=swap"
    rel="stylesheet"
  >


  <link
    rel="stylesheet"
    href="style.css"
  />


</head>

<body>
  <header>
    <h1>Your Fashion Diary</h1>
    <h4>POST content to an API Endpoint from an HTML Form to be stored in a Database.</h4>

    <div class="intro">
      <p>Previously we published data from a database by <a
          href="https://github.com/ixd-system-design/API-Endpoints-for-Publishing-and-Searching"
        >creating our own API</a>. Now, let's build functionality to allow users to submit and store data. We will add
        two core elements:</p>
      <ul>
        <li>A <a
            target="_blank"
            href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"
          >POST</a> endpoint on the backend.</li>
        <li>An <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form">HTML Form</a> on the
          front-end.</li>
      </ul>
      <p> Form submissions are sent as JSON data in the body of a <a
          target="_blank"
          href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"
        >POST</a> request to an API endpoint, and saved to <a
          href="https://www.mongodb.com/products/platform/atlas-database"
        >MongoDB Atlas</a>.
        API Endpoints are defined by <a href="https://expressjs.com">Express</a>, using <a
          href="https://www.prisma.io/orm"
        >Prisma</a> to communicate with the database.
      </p>
      <p>When successful, we will log the submission to the console, and also refresh the data list below. NOTE: this
        demo implements the 'C' and 'R' of 'CRUD' (Create and Read) . We will deal with the 'U' and 'D' (Update and
        Delete) elsewhere.</p>
      </p>
    </div>
  </header>

  <section id="status">
    <p id="readyStatus">‚úÖ MongoDB is Ready</p>
    <p id="notReadyStatus">‚ùå MongoDB is not connected. Please check your connection string in <code>.env</code> file.
    </p>
  </section>

  <main>
    <h2>üì∏ <span>Save an Outfit</span></h2>
    <p>Record outfit details, brands, occasion and your notes.</p>

    <form id="myForm">
      <div class="entry-row">
          <div class="image-column">
          <label class="upload-label">
            <input type="file" id="image" name="image" accept="image/*" />
            <div class="upload-button">Upload</div>
          </label>
          <div id="imagePreview" class="image-preview">No image</div>
          <div class="tag-groups">
            <div id="occasionTags" class="tags occasion-tags" aria-label="Occasion tags"></div>
            <div id="brandTags" class="tags brand-tags" aria-label="Brand tags"></div>
          </div>
        </div>

        <div class="meta-column">
          <div class="meta-top">
            <fieldset class="name-field">
              <label for="name">Title / Name</label>
              <input required type="text" name="name" id="name" placeholder="e.g. Summer Dress" autocomplete="off" />
            </fieldset>

            <fieldset class="date-field">
              <label for="date">Date</label>
              <input type="date" name="date" id="date" />
            </fieldset>
          </div>

          <div class="meta-mid">

            <fieldset class="occasion-field">
              <label for="occasionSelect">Occasion</label>
              <select id="occasionSelect" name="occasion">
                <option value="">Select occasion</option>
                <option>Everyday</option>
                <option>Work</option>
                <option>Party</option>
                <option>Date</option>
                <option>Gym</option>
                <option>Vacation</option>
                <option>Formal Event</option>
                <option>Special Event</option>
                <option>Other</option>
              </select>
              <input type="text" id="occasionOther" placeholder="Please specify" style="display:none; margin-top:0.5rem;" />
            </fieldset>

            <fieldset class="brands-field">
              <label for="brandInput">Brands</label>
              <input type="text" id="brandInput" placeholder="Add brand and press Enter" autocomplete="off" />
              <small>Press Enter or comma to add a brand tag.</small>
            </fieldset>

          </div>

          <div class="meta-bottom">
            <fieldset class="rating-field">
              <label>Rating</label>
              <div id="starRating" class="stars" data-rating="0">
                <button type="button" class="star" data-value="1">‚òÜ</button>
                <button type="button" class="star" data-value="2">‚òÜ</button>
                <button type="button" class="star" data-value="3">‚òÜ</button>
                <button type="button" class="star" data-value="4">‚òÜ</button>
                <button type="button" class="star" data-value="5">‚òÜ</button>
              </div>
            </fieldset>

            <fieldset class="notes-field">
              <label for="notes">Personal Notes</label>
              <textarea id="notes" name="notes" rows="5" placeholder="Write your thoughts..."></textarea>
            </fieldset>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="reset" class="reset">Reset</button>
        <button type="submit" class="save" id="saveButton">Save Entry</button>
      </div>
    </form>


  </main>

  <section id="content">
  </section>

  <section>
    <h3>Learning Prompts</h3>
    <p>Can you add a connection string to the NodeJS environment (e.g. .env file) for your own MongoDB Atlas Cluster?
    </p>
    <p>Use MongoDB Compass to verify that your data collection form is working. </p>
    <p>Looking ahead: in the future we will build a full CRUD implementation. Can you envision how we might add features
      for Updating and deleting individual records?</p>
  </section>

  <footer>
    Created by <a href="https://nsitu.ca">Harold Sikkema</a> in the context of
    Systems Design in the Interaction Design program at Sheridan College.
  </footer>

  <script
    src="script.js"
    type="module"
  ></script>

</body>

</html>